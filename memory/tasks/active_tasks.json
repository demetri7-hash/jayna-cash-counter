{
  "tasks": [
    {
      "id": "task_20251110_004",
      "title": "Build TipShare FOH Tip-Out Calculator for Tarla Grill",
      "description": "Complete multi-page web application for automating FOH tip-out calculations with Supabase database integration - independent from main Jayna Gyro app",
      "status": "completed",
      "priority": "high",
      "created": "2025-11-10T23:30:00Z",
      "completed": "2025-11-11T00:45:00Z",
      "related_files": [
        "tarla-tip-app/index.html",
        "tarla-tip-app/roster.html",
        "tarla-tip-app/history.html",
        "tarla-tip-app/supabase-client.js",
        "tarla-tip-app/schema.sql",
        "tarla-tip-app/README.md"
      ],
      "dependencies": [],
      "notes": [
        "INDEPENDENT APPLICATION: Completely separate from Jayna Gyro system in /tarla-tip-app folder",
        "DATABASE: 3 Supabase tables (Tarla_Employees, Tarla_Shifts, Tarla_Shift_Entries)",
        "BUSINESS LOGIC: 3-role tip-out system (Servers contribute, Support Staff receive, Bartenders independent)",
        "MAIN CALCULATOR (index.html): Enter daily sales/tips, auto-calculate payouts, save to database",
        "ROSTER MANAGEMENT (roster.html): CRUD operations for employees (Server, Bartender, Support Staff)",
        "HISTORY (history.html): View all past shift reports with detailed payouts",
        "CALCULATIONS: Support Pool = Sum(Server Net Sales √ó Server %), divided equally among Support Staff",
        "Server Payout: CC Tips - (Net Sales √ó Server %)",
        "Support Staff Payout: Support Pool / Number of Support Staff",
        "Bartender Payout: CC Tips - (Net Sales √ó Bartender %)",
        "TECHNOLOGY: Tailwind CSS, Supabase.js CDN, pure vanilla JavaScript",
        "DEPLOYMENT: Live at jayna-cash-counter.vercel.app/tarla-tip-app/",
        "Supabase URL: https://gaawtbqpnnbbnsyswqwv.supabase.co",
        "FEATURES: Print-optimized reports, mobile responsive, historical data persistence",
        "USER FLOW: 1) Add employees in roster, 2) Calculate shift report, 3) View/print history",
        "Sample employees included in schema for testing",
        "All database tables verified and operational"
      ]
    },
    {
      "id": "task_20251110_003",
      "title": "Fix Leaderboard Name Sync When Changing Prep Item User",
      "description": "Update prep_count_log table when user clicks name to reassign prep item - ensures leaderboard shows correct person",
      "status": "completed",
      "priority": "high",
      "created": "2025-11-10T23:00:00Z",
      "completed": "2025-11-10T23:15:00Z",
      "related_files": [
        "orders-prep.html"
      ],
      "dependencies": [],
      "notes": [
        "BUG: When clicking name to change who counted prep item, only inventory_items updated, not prep_count_log",
        "RESULT: Leaderboard showed original person instead of reassigned person",
        "FIX: changePrepItemUser() now updates BOTH tables",
        "Updates inventory_items.counted_by (existing behavior)",
        "ALSO updates prep_count_log.counted_by (NEW - fixes leaderboard)",
        "Finds most recent log entry for item and updates it",
        "Both tables stay in sync ‚Üí leaderboard accurate",
        "Location: orders-prep.html lines 2318-2337",
        "Deployed to production: commit 03f0932"
      ]
    },
    {
      "id": "task_20251110_002",
      "title": "Fix Multiple Database Issues in Orders & Prep System",
      "description": "Fixed price_history missing columns, invoices table column mismatch, and MANAGE tab password authentication",
      "status": "completed",
      "priority": "high",
      "created": "2025-11-10T22:00:00Z",
      "completed": "2025-11-10T23:00:00Z",
      "related_files": [
        "orders-prep.html",
        "database/migrations/add_source_columns_to_price_history.sql",
        "api/migrate-price-history.js"
      ],
      "dependencies": [],
      "notes": [
        "ISSUE 1: Price history tracking error - 'source' column not found (PGRST204)",
        "Created SQL migration: add_source_columns_to_price_history.sql",
        "Added columns: source (TEXT), source_id (BIGINT), updated_at (TIMESTAMP)",
        "Created API endpoint: api/migrate-price-history.js for automated migration",
        "ISSUE 2: Invoice learning system error - wrong column name",
        "Code used 'vendor_name' but actual column is 'vendor' in invoices table",
        "Fixed: orders-prep.html line 16552 (vendor_name ‚Üí vendor)",
        "ISSUE 3: MANAGE tab password not accepting JaynaGyro2025!",
        "Missing password parameter in requirePasswordFor() function call",
        "Fixed: orders-prep.html line 3151 - added 'JaynaGyro2025!' as 3rd parameter",
        "All three issues resolved and deployed: commits 9624c75, e56c6a8, bf107cb",
        "Price tracking now working correctly during pending order check-in",
        "Invoice learning system saves matched items for future auto-detection",
        "MANAGE tab now accepts master password correctly"
      ]
    },
    {
      "id": "task_20251110_001",
      "title": "Implement 3-Inch Round Label Printing for Catering Orders",
      "description": "Complete PDF generation system for 3\" round labels (6 per page: 2 columns x 3 rows) with confirmation popup and dual print/download options",
      "status": "completed",
      "priority": "high",
      "created": "2025-11-10T19:00:00Z",
      "completed": "2025-11-10T22:45:00Z",
      "related_files": [
        "api/print-3inch-labels.js",
        "catering.html"
      ],
      "dependencies": [],
      "notes": [
        "Backend API: /api/print-3inch-labels.js - generates PDF with jsPDF (Node.js serverless)",
        "Label format: BOLD ALL CAPS text (helvetica bold, Impact/Anton style requested)",
        "Label content: 'MADE WITH LOVE / BY YOUR FRIENDS / AT JAYNA GYRO ‚ô•' + item name + quantity + customer name + date",
        "Blue heart: Drawn with jsPDF shapes (2 circles + triangle) - RGB(59, 130, 246) #3b82f6",
        "Ingredient labels: Same tagline + item name + ingredients (no customer/date)",
        "Automatic ingredient detection: Tzatziki, Spicy Aioli, Lemon Vinaigrette, Hummus, Baba Ganoush",
        "Label positioning: 8.5x11\" page, 3\" diameter (216pt), 2 columns (168pt, 444pt), 3 rows (144pt, 396pt, 648pt)",
        "LABEL GROUPING: Sorts labels alphabetically by base item name (all TZATZIKI labels consecutive)",
        "INGREDIENT COUNT FIX: Generates ONE ingredient label PER container (4 containers = 4 ingredient labels)",
        "Frontend: print3InchLabels() function in catering.html",
        "Button: Purple 'üñ®Ô∏è PRINT 3 INCH LABELS' in prep modal (EXPORT LABELS button hidden)",
        "Confirmation popup: Shows page count 'üìÑ X SHEETS REQUIRED' with 3 buttons:",
        "  - CANCEL (gray) - Close popup",
        "  - üì• DOWNLOAD (blue #3b82f6) - Download PDF",
        "  - üñ®Ô∏è PRINT NOW (black) - Email to Epson printer (GSS4168CTJJA73@print.epsonconnect.com)",
        "Page count calculation: Math.ceil(totalLabels / 6) - returned in X-Page-Count header",
        "Dynamic text sizing: Scales down for long item names (24pt‚Üí12pt), wraps on spaces only (preserves words)",
        "Date format: MM/DD/YY with slashes (11/14/25)",
        "Download button: Calls API with ?download=true, downloads PDF, green success feedback",
        "Print button: Calls API without download param, emails via nodemailer, green success feedback",
        "Both buttons: Loading states, error handling with red feedback, auto-close on success (1.5s)",
        "PRODUCTION READY: Print mode activated, all fixes deployed",
        "User feedback: 'ITS FREAKING PERFECT!'"
      ]
    },
    {
      "id": "task_20251103_001",
      "title": "Savanah Vue Employee Separation Documentation",
      "description": "Created legally compliant California employment separation documents for final check delivery",
      "status": "completed",
      "priority": "high",
      "created": "2025-11-03T20:00:00Z",
      "completed": "2025-11-03T20:15:00Z",
      "related_files": [
        "employee-separations/Savanah_Vue_Final_Check_Receipt.md",
        "employee-separations/Savanah_Vue_Employment_Status_Change_Notice.md"
      ],
      "dependencies": [],
      "notes": [
        "Created Final Paycheck Receipt - confirms $364.22 net pay received",
        "Created Employment Status Change Notice - CA Labor Code compliant",
        "Includes COBRA, unemployment insurance, and employee rights information",
        "Documents must be signed by employee and management",
        "Keep copies: one for employee, one for company files"
      ]
    },
    {
      "id": "task_20251101_002",
      "title": "Deploy Landscape PDF Format to Production 4AM Cron Job",
      "description": "Replace old portrait executive summary PDF format with new landscape compact layout in /api/foh-daily-report.js",
      "status": "completed",
      "priority": "high",
      "created": "2025-11-01T18:30:00Z",
      "completed": "2025-11-01T19:15:00Z",
      "related_files": [
        "api/foh-daily-report.js",
        "foh-checklists.html"
      ],
      "dependencies": ["Perfected landscape PDF logic in foh-checklists.html"],
      "notes": [
        "Removed executive summary page (staff performance tables, missing checklists)",
        "Changed orientation from 'portrait' to 'landscape' (792x612pt)",
        "Each session gets clean landscape page with 2-column layout",
        "Left column: Tasks grouped by person compactly (6pt font)",
        "Right column: Quality ratings + Session Insights box",
        "STAFF line: Shows people from tasksByPerson (actual task completers)",
        "Fixed staff count: Object.keys(tasksByPerson).length",
        "Added First/Last task timestamps to insights box",
        "Enhanced REVIEW format: Bigger fonts (8-10pt), readable notes (7pt), 3 lines max",
        "Added 'By: [name] at [time]' metadata for review-only checklists",
        "Footer: Page numbers, generated time, credit line on all pages",
        "Deployed to production: commit 4483395",
        "User confirmed: 'everything is perffect lets deploy it'"
      ]
    },
    {
      "id": "task_20251101_001",
      "title": "Add Credit Line to All HTML Pages",
      "description": "Add 'APP CREATED BY DEMETRI GREGORAKIS' (ALL CAPS) to all 12 main application HTML pages for brand consistency",
      "status": "completed",
      "priority": "medium",
      "created": "2025-11-01T17:00:00Z",
      "completed": "2025-11-01T17:40:00Z",
      "related_files": [
        "index.html",
        "boh.html",
        "catering.html",
        "cogs.html",
        "catering-test.html",
        "managerlogs.html",
        "foh-checklists.html",
        "drivers.html",
        "scheduling.html",
        "teamupdates.html",
        "manager.html",
        "amex-receipts.html"
      ],
      "dependencies": [],
      "notes": [
        "Changed from mixed case to ALL CAPS format",
        "Fixed placement: after topLeaderDisplay section, not after 'FOR AUTHORIZED USE ONLY'",
        "Consistent styling: opacity: 0.7; margin-top: 12px",
        "User reminded to ALWAYS commit/push after changes",
        "User reminded to update memory files automatically",
        "Deployed to production: commit 6541f15"
      ]
    },
    {
      "id": "task_20251030_001",
      "title": "Catering PDF Visual Quality & Date Clarity",
      "description": "Redesign catering prep breakdown page with proper checkboxes, colored sections, and clear date labels",
      "status": "completed",
      "priority": "high",
      "created": "2025-10-30T10:00:00Z",
      "completed": "2025-10-30T12:00:00Z",
      "related_files": ["index.html"],
      "dependencies": [],
      "notes": [
        "Replaced corrupted Unicode emojis/checkboxes with drawn rectangles",
        "Added blue title bars, gray section headers",
        "Separated 'Generated on:' timestamp from 'DUE DATE:' labels",
        "User confirmed looks good"
      ]
    },
    {
      "id": "task_20251030_002",
      "title": "Adjust BYO Gyro Sauce Quantities",
      "description": "Reduce sauce quantities from 10 portions per set to 20 portions per set",
      "status": "completed",
      "priority": "medium",
      "created": "2025-10-30T12:00:00Z",
      "completed": "2025-10-30T12:15:00Z",
      "related_files": ["index.html"],
      "dependencies": [],
      "notes": [
        "Changed Math.ceil(total/10) to Math.ceil(total/20)",
        "Halved sauce quantities as requested",
        "User confirmed correct"
      ]
    },
    {
      "id": "task_20251030_003",
      "title": "Implement Department Filtering for Checklists",
      "description": "Add FOH/BOH department column to database, filter checklists by department on each page",
      "status": "completed",
      "priority": "high",
      "created": "2025-10-30T13:00:00Z",
      "completed": "2025-10-30T15:00:00Z",
      "related_files": [
        "foh-checklists.html",
        "boh.html",
        "sql/add_department_column.sql",
        "sql/mark_boh_checklists.sql"
      ],
      "dependencies": ["Supabase checklist_definitions table"],
      "notes": [
        "Added department TEXT column with CHECK constraint",
        "Marked 8 checklists as FOH, all boh_* as BOH",
        "Changed filter from .like('foh_%') to .eq('department', 'FOH')",
        "Fixed BOH page duplicate ADMIN_PASSWORD error",
        "All checklists now visible in appropriate pages"
      ]
    },
    {
      "id": "task_20251030_004",
      "title": "Fix Checklist Edit Data Freshness",
      "description": "Ensure edited checklists reload from database when started, not from cache",
      "status": "completed",
      "priority": "high",
      "created": "2025-10-30T15:00:00Z",
      "completed": "2025-10-30T15:30:00Z",
      "related_files": ["foh-checklists.html", "boh.html"],
      "dependencies": [],
      "notes": [
        "Changed selectChecklist() to call loadChecklistFromDatabase() first",
        "Then update cached state with fresh data",
        "Fixes issue where new tasks weren't showing after edit"
      ]
    },
    {
      "id": "task_20251030_005",
      "title": "Add Status Indicators and Sort by Start Time",
      "description": "Display 'NOT YET STARTED' or 'IN PROGRESS' badge on checklist cards, sort by start time",
      "status": "completed",
      "priority": "medium",
      "created": "2025-10-30T16:00:00Z",
      "completed": "2025-10-30T17:30:00Z",
      "related_files": ["foh-checklists.html", "boh.html"],
      "dependencies": ["foh_checklist_sessions table", "boh_checklist_sessions table"],
      "notes": [
        "Query today's sessions from database",
        "Create checklistStatuses map (session exists = IN_PROGRESS)",
        "Display badge: 'NOT YET STARTED' (red #dc2626) or 'IN PROGRESS' (yellow #f59e0b)",
        "Sort checklists by start time (earliest first)",
        "Maintain sort order even when expired",
        "Fixed BOH page bug: was querying foh_checklist_sessions instead of boh_checklist_sessions",
        "Deployed to production: commit aaefd66"
      ]
    }
  ]
}
